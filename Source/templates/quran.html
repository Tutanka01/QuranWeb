<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename = 'styles_quran.css') }}">
  <title>Quran</title>
</head>

<body>
  <div class="dropdown">
    <button class="dropbtn">Quran</button>
    <div class="dropdown-content">
        {% for sourate in sourates %}
        <a href="">{{ sourate }}</a>
        {% endfor %}
    </div>
  </div>

  <div>
    <h1>Makhal.fr</h1>
  </div>

  <div class="container">
    <h1>Quelle sourate ?</h1>
    <form action="http://localhost:5000/login" method="POST">
      <input type="text" name="sourate" placeholder="ex : 'Al-Faatiha' ">
      <input type="submit" value="Envoyer">
    </form>
  </div>

 <div class="center">
  <div class="lsite">
    <ul> 
      {% for i in range(0, len) %}
      <div class="container_sourates">
        <div class="sourates-number">{{i + 1}}</div>
        <li class="sourate-item">{{ sourates[i] }}</li> 
      </div>
        {% endfor %} 
    </ul> 
  </div>
</div>
</body>
<script>
  const items = document.querySelectorAll('.sourate-item');
  items.forEach(item => {
    item.addEventListener('click', (event) => {
      event.preventDefault(); // Empêche le rechargement de la page
      const name = item.textContent;
      fetch(`http://localhost/sourate/${name}`)
        .then(response => {
          if (response.ok) {
            // Rediriger vers la page correspondante
            // Attention cela est une IP locale, donc l'ip de mon pc sur mon rzo
            window.location.href = `http://localhost/sourate/${name}`;
          } else {
            alert('Une erreur est survenue. Veuillez réessayer.');
          }
        })
        .catch(error => {
          console.log('Une erreur est survenue:', error);
          alert('Une erreur est survenue. Veuillez réessayer.');
        });
    });
  });
  
</script>
</html>
